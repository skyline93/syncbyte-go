# @BaseUrl=http://127.0.0.1:8000
@BaseUrl=http://192.168.1.139:8000


### 创建备份策略

POST {{BaseUrl}}/api/v1/policy HTTP/1.1
Content-Type: application/json

{
    "resource_name": "syncbyte-db",
    "resource_type": "database",
    "resource_options": {
        "db_type": "postgresql",
        "version": "14.5",
        "server": "127.0.0.1",
        "port": 5432,
        "user": "syncbyte",
        "password": "123456",
        "db_name": "syncbyte"
    },
    "retention": 7,
    "is_compress": true,
    "schedule_type": "cron",
    "schedule_options": {
        "cron": "* * * * *"
    }
}

### 添加主机

POST {{BaseUrl}}/api/v1/host HTTP/1.1
Content-Type: application/json

{
    "hostname": "LOCALHOST",
    "ip": "127.0.0.1",
    "host_type": "backup"
}

### 添加存储单元

POST {{BaseUrl}}/api/v1/storageunit HTTP/1.1
Content-Type: application/json

{
    "name": "stutest",
    "stu_type": "local",
    "options": {
        "endpoint": "",
        "accesskey":"",
        "secretkey":"",
        "bucket":"",
        "mountpoint":"/tmp"
    }
}

### 发起备份任务

POST {{BaseUrl}}/api/v1/backup/job HTTP/1.1
Content-Type: application/json

{
    "policy_id": 1
}

###
